<div class="register-container">
  <div class="register-panel">
    <div class="logo-container">
      <img src="assets/logoSocial.png" alt="Social Automate Logo" class="logo-icon" />
      <h1 class="logo-text">Social Automate</h1>
    </div>

    <h2 class="welcome-title">Crear Cuenta</h2>
    <p class="welcome-subtitle">Regístrate para comenzar</p>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <!-- Mensaje de error general -->
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <!-- PASO 1: Información Personal -->
      <div *ngIf="currentStep === 1" class="step-content">
        <!-- Nombre -->
        <div class="input-group">
          <svg class="input-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input
            type="text"
            formControlName="firstName"
            placeholder="Nombre"
            class="input-field"
            [class.invalid]="isFieldInvalid('firstName')"
          />
          <span *ngIf="isFieldInvalid('firstName')" class="error-text">
            {{ getFieldError('firstName') }}
          </span>
        </div>

        <!-- Apellido -->
        <div class="input-group">
          <svg class="input-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input
            type="text"
            formControlName="lastName"
            placeholder="Apellido"
            class="input-field"
            [class.invalid]="isFieldInvalid('lastName')"
          />
          <span *ngIf="isFieldInvalid('lastName')" class="error-text">
            {{ getFieldError('lastName') }}
          </span>
        </div>

        <!-- Email -->
        <div class="input-group">
          <svg class="input-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input
            type="email"
            formControlName="email"
            placeholder="Correo electrónico"
            class="input-field"
            [class.invalid]="isFieldInvalid('email')"
          />
          <span *ngIf="isFieldInvalid('email')" class="error-text">
            {{ getFieldError('email') }}
          </span>
        </div>

        <!-- Teléfono -->
        <div class="input-group">
          <svg class="input-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input
            type="tel"
            formControlName="telephone"
            placeholder="Teléfono"
            class="input-field"
            [class.invalid]="isFieldInvalid('telephone')"
          />
          <span *ngIf="isFieldInvalid('telephone')" class="error-text">
            {{ getFieldError('telephone') }}
          </span>
        </div>

        <!-- Botón Siguiente -->
        <button type="button" class="register-button" (click)="nextStep()">
          Siguiente
        </button>
      </div>

      <!-- PASO 2: Seguridad -->
      <div *ngIf="currentStep === 2" class="step-content">
        <!-- Contraseña -->
        <div class="input-group">
          <svg class="input-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="Contraseña"
            class="input-field"
            [class.invalid]="isFieldInvalid('password')"
          />
          <button type="button" class="toggle-password" (click)="togglePassword()">
            <svg *ngIf="!showPassword" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <svg *ngIf="showPassword" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20C7 20 2.73 16.39 1 12C2.73 7.61 7 4 12 4C16.39 4 20.73 7.61 22 12C21.27 14.39 19.94 16.39 17.94 17.94Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1 1L23 23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 9C9.53043 8.39993 10.2342 7.99995 11 7.99995C11.7658 7.99995 12.4696 8.39993 13 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M15 15C14.4696 15.6001 13.7658 16 13 16C12.2342 16 11.5304 15.6001 11 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <span *ngIf="isFieldInvalid('password')" class="error-text">
            {{ getFieldError('password') }}
          </span>
        </div>

        <!-- Confirmar Contraseña -->
        <div class="input-group">
          <svg class="input-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            formControlName="confirmPassword"
            placeholder="Confirmar contraseña"
            class="input-field"
            [class.invalid]="isFieldInvalid('confirmPassword')"
          />
          <button type="button" class="toggle-password" (click)="toggleConfirmPassword()">
            <svg *ngIf="!showConfirmPassword" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <svg *ngIf="showConfirmPassword" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20C7 20 2.73 16.39 1 12C2.73 7.61 7 4 12 4C16.39 4 20.73 7.61 22 12C21.27 14.39 19.94 16.39 17.94 17.94Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1 1L23 23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 9C9.53043 8.39993 10.2342 7.99995 11 7.99995C11.7658 7.99995 12.4696 8.39993 13 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M15 15C14.4696 15.6001 13.7658 16 13 16C12.2342 16 11.5304 15.6001 11 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <span *ngIf="isFieldInvalid('confirmPassword')" class="error-text">
            {{ getFieldError('confirmPassword') }}
          </span>
        </div>

        <!-- Botones Paso 2 -->
        <div class="step-buttons">
          <button type="button" class="back-button" (click)="previousStep()">
            Anterior
          </button>
          <button type="submit" class="register-button" [disabled]="isLoading">
            <span *ngIf="!isLoading">Registrarse</span>
            <span *ngIf="isLoading">Registrando...</span>
          </button>
        </div>
      </div>
    </form>


    <p class="signup-link">¿Ya tienes una cuenta? <a routerLink="/login">Iniciar Sesión</a></p>
  </div>
</div>
